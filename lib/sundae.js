// Generated by CoffeeScript 1.7.1
(function() {
  var Sundae, configs, express;

  express = require('express');

  configs = require('./configs');

  Sundae = (function() {
    function Sundae() {
      this._configs = {};
      this._params = {};
    }

    Sundae.prototype.config = function(key, fn) {
      this._configs[key] = fn;
      return this;
    };

    Sundae.prototype.set = function(key, val) {
      this._params[key] = val;
      return this;
    };

    Sundae.prototype.get = function(key) {
      return this._params[key];
    };

    Sundae.prototype.run = function(callback) {
      var app, fn, key, _ref;
      if (callback == null) {
        callback = function() {};
      }
      app = express();
      _ref = this._configs;
      for (key in _ref) {
        fn = _ref[key];
        if (typeof configs[key] === "function") {
          configs[key](app, fn);
        }
      }
      return app.listen(this._params['port'] || app.get('port') || 3000, callback);
    };

    return Sundae;

  })();

  module.exports = new Sundae;

}).call(this);
